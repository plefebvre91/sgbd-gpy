\documentclass{article}

\usepackage[french]{babel}
\usepackage[latin1]{inputenc}
\usepackage{amsmath,amssymb}
\usepackage{float}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage[normalem]{ulem}

%%%%%%%%%%%%%%%% Lengths %%%%%%%%%%%%%%%%
\setlength{\textwidth}{15.5cm}
\setlength{\evensidemargin}{0.5cm}
\setlength{\oddsidemargin}{0.5cm}

\begin{document}

\makeatletter
\def\clap#1{\hbox to 0pt{\hss #1\hss}}%
\def\ligne#1{%
\hbox to \hsize{%
\vbox{\centering #1}}}%
\def\haut#1#2#3{%
\hbox to \hsize{%
\rlap{\vtop{\raggedright #1}}%
\hss
\clap{\vtop{\centering #2}}%
\hss
\llap{\vtop{\raggedleft #3}}}}%
\def\bas#1#2#3{%
\hbox to \hsize{%
\rlap{\vbox{\raggedright #1}}%
\hss
\clap{\vbox{\centering #2}}%
\hss
\llap{\vbox{\raggedleft #3}}}}%
\def\maketitle{%
\thispagestyle{empty}\vbox to \vsize{%
\haut{}{\@blurb}{}
\vfill
\vspace{1cm}
\begin{flushright}
\usefont{OT1}{ptm}{m}{n}
\huge \@title
\end{flushright}
\par
\hrule height 4pt
\par
\begin{flushright}
\usefont{OT1}{phv}{m}{n}
\Large \@author
\par
\end{flushright}
\vspace{1cm}
\vfill
\vfill
\bas{}{Deuxième année, filière informatique.\\\@location, le \@date}{}
}%
\cleardoublepage
}
\def\date#1{\def\@date{#1}}
\def\author#1{\def\@author{#1}}
\def\title#1{\def\@title{#1}}
\def\location#1{\def\@location{#1}}
\def\blurb#1{\def\@blurb{#1}}
\date{\today}
\author{}
\title{}
\blurb{}
\makeatother
\title{Projet \emph{SGBD} : dotGame}
\author{Yvon Garbage, Pierre Lefebvre, Grégoire Pichon\\}
\location{Bordeaux}
\blurb{%
}%

\begin{figure}[!tp]
\centering
\includegraphics[width=0.6\textwidth]{enseirb-matmeca}
\label{fig:logo}
\end{figure}
\maketitle

\newenvironment{mld}
{\par\begin{minipage}{\linewidth}\begin{tabular}{rp{\linewidth}}}
{\end{tabular}\end{minipage}\par}
\newcommand{\relat}[1]{\textsc{#1}}
\newcommand{\attr}[1]{\emph{#1}}
\newcommand{\prim}[1]{\uline{#1}}
\newcommand{\foreign}[1]{\#\textsl{#1}}

\newpage
\tableofcontents
\newpage

\section*{Introduction}
\indent L'objectif de ce projet est de compléter le cours de SGBD dispensé à l'ENSEIRB-Matmeca par une mise en pratique. Réalisé par un trinôme, ce projet a pour objectif de se confronter au développement d'une base de donnéesrelationnelle. Ce document présente les différentes étapes relatives à ce projet, de la présentation du sujet à la réalisation d'une interface utilisateur. Il sera notamment explicité les problèmes relatifs à la modélisation et la réalisation des requêtes importantes.
\\

\indent Le choix pour l'environnement de travail a été des plus classiques: MySQL et PHP. Le site ainsi crée met en avant les différentes opérations réalisables sur la base de données.

\section{Présentation du sujet}
\indent La base de données à réaliser doit permettre de gérer une communauté de joueurs de jeux vidéos. Il est donc nécessaire de pouvoir gérer un ensemble de joueurs, un ensemble de jeux relatifs à certaines plateformes (type de console ou d'ordinateur) et à certaines catégories (Tir, Action \dots). Par ailleurs, un joueur doit pouvoir noter les différents jeux, par le biais de commentaires, et les autres joueurs doit pouvoir évaluer la pertinence du commentaire en question. Pour finir, un joueur doit pouvoir renseigner ses préférences: sa catégorie de jeu préférée et la plateforme sur laquelle il aime jouer.\\

\indent D'un point de vue implémentation, il est demandé de réaliser des requêtes basiques de consultation, de mise à jour, d'ajout ou encore de suppression. Par ailleurs, certaines requêtes plus avancées sont requises, elles seront explicités plus tard dans ce document. \\

\indent Le choix fait a été de réaliser l'ensemble des requêtes. Nous commencerons par étudier plus en détails les termes du sujet afin de fournir un modèle entité-association. Par la suite, nous présenterons le modèle relationnel avant de détailler l'implémentation avec MySQL et de présenter brièvement l'utilisation de notre interface graphique.
\newpage

\section{Modélisation}
\indent Cette partie entend préciser les étapes nécessaires à l'implémentation de la base de données. Le modèle conceptuel retenu sera présenté, ainsi que le modèle relationnel en troisième forme normale et les différentes étapes ayant permis cette mise en forme.

\subsection{Modèle conceptuel}
\indent Réaliser le modèle conceptuel demande de préciser quelques demandes du sujet, mais aussi de faire de choix. Nous verrons ces différents choix avant de présenter les entités et de détailler les opérations autorisées sur chaque entité.

\subsubsection{Contexte précis}
\begin{itemize}
\item Pour un joueur, le pseudonyme sera unique. Par ailleurs, la catégorie et la plateforme préférées devront obligatoirement être renseignées.
\item Un jeu étant disponible sur plusieurs plateformes, sa date de parution sera relative à une plateforme donnée.
\item Les joueurs doivent pouvoir noter les jeux, d'une note de 0 à 20 accompagnée d'un commentaire. Cependant, uun joueur ne pourra noter qu'une seule fois un jeu, et préciser alors la plateforme sur laquelle il y a joué.
\item Les joueurs peuvent indiquer s'ils trouvent un commentaire pertinent ou non. On s'assurera qu'un joueur ne peut pas évaluer un commentaire qu'il a lui même émis. De plus, un joueur ne pourra indiquer son avis qu'une fois par commentaire.
\item Les dates devront être cohérentes. Elles le seront toutes par rapport à la date actuelle. De plus, les dates des commentaires relatifs à une plateforme donnée pour un jeu devront être plus récentes que la date de sortie du jeu sur la plateforme en question. 
\end{itemize}

\subsubsection{Entités}
\indent A partir de l'ensemble des demandes initiales du sujet et des choix effectués, il est relativement aisé de décrire les différentes entités. Elles sont visibles dans le modèle conceptuel \ref{fig:mcd}. Les choix suivants ont été fait pour les associations: 
\begin{itemize}
\item Un joueur préfère une et une seule catégorie. Il en va de même pour la plateforme
\item Une catégorie peut n'être préférée par personne, mais correspond au minimum à un jeu. Idem pour une plateforme.
\item Un jeu peut poster plusieurs commentaires et en juger plusieurs.
\item Un pouce se réfère à un unique commentaire et provient d'un joueur précis.
\item Un commentaire concerne une plateforme et un jeu.
\item Un éditeur peut éditer plusieurs jeux, mais doit au minimum en éditer un.
\end{itemize}

\newpage
\begin{figure}[!h]
\begin{center}
\includegraphics[width=0.8\textwidth]{MCD.png}
\end{center}
\caption{Modèle conceptuel}
\label{fig:mcd}
\end{figure}
\newpage

\subsubsection{Opérations autorisées}
\indent Il doit être possible d'ajouter l'ensemble des entités dans la base de données. Cependant, les requêtes d'ajout, de même que les requêtes de mise à jour, doivent être en respect avec certains choix présentés antérieurement, notamment quand aux cardinalités des associations. \\

\indent Il est également possible de supprimer des données de la table. Il est imaginable de supprimer un éditeur, auquel cas l'ensemble des jeux édités par cet éditeur seront également supprimés. Plus réalistement, un joueur pourra être supprimé de la table (l'exemple de la bannition d'un forum). Dans ce cas, on supposera qu'il y a des raisons valables à son exclusion et que l'ensemble des commentaires qu'il a postés et des pouces qu'il a pu donné seront supprimés.

\subsection{Modèle relationnel}
\begin{mld}
  \relat{Joueur} & (\prim{pseudo}, \attr{nom}, \attr{prenom}, \attr{mail}, \foreign{idCategorie}, \foreign{idPlateforme})\\
  \relat{Pouce} & (\prim{idPouce}, \attr{valeur}, \foreign{pseudo}, \foreign{idCommentaire})\\
  \relat{Commentaire} & (\prim{idCommentaire}, \attr{note}, \attr{commentaire}, \attr{date}, \foreign{pseudo}, \foreign{idJeu}, \foreign{idPlateforme})\\
  \relat{Categorie} & (\prim{idCategorie}, \attr{nomCategorie})\\
  \relat{Jeu} & (\prim{idJeu}, \attr{nomJeu}, \foreign{idEditeur})\\
  \relat{Plateforme} & (\prim{idPlateforme}, \attr{nomPlateforme})\\
  \relat{Editeur} & (\prim{idEditeur}, \attr{nomEditeur})\\
  \relat{Appartient} & (\prim{\foreign{idCategorie}, \foreign{idJeu}})\\
  \relat{Est disponible} & (\prim{\foreign{idPlateforme}, \foreign{idJeu}}, \attr{dateSortie})\\
\end{mld}


\newpage
\section{Zoom sur les requêtes importantes}

\newpage
\section{Interface: réalisation et utilisation}

\newpage
\section*{Conclusion}
\indent Ce projet a permis de mettre en oeuvre différentes techniques vues dans le module SGBD. Il a notamment permis de comprendre les différentes étapes nécessaires à la bonne création d'une base de données. Si le modèle conceptuel peut initialement sembler suffisant, la mise sous forme normale permet de déceler certains problèmes relatifs à l'intégrité de la base. 

\end{document}
